#+OPTIONS: toc:4 num:4 author:nil creator:nil ^:nil timestamp:nil
#+TITLE: gmailの検索
#+SUBTITLE: 梨下村塾@令和4（2022）年10月31日
#+AUTHOR: 早川 剛(a.k.a. HAYATUYO) {{{email}}}
#+EMAIL: hayakawa_tuyosi_work@yahoo.co.jp
#+LANGUAGE: ja-jp

# (setq org-html-validation-link nil)

# (hayatuyo-org-global-cycle-1)
# (hayatuyo-org-global-cycle-2)
# (hayatuyo-org-global-cycle-3)
# (hayatuyo-org-global-cycle-4)

# ################################################################
# html へのエクスポートの設定
# ################################################################

# ################
# 全体的なtheme
# ################
#+SETUPFILE: ./theme-readtheorg.setup

# ################
# html にエクスポートする際のマクロ
# ################
#+MACRO: linkImage @@html:<a href="./images/$1"><img src="./images/thumbnails/$1"></a>@@

# ################
# html にエクスポートする際の theme のカスタマイズ
# ################
#+HTML_HEAD: <style> #content{max-width:1800px;}</style>
#+HTML_HEAD: <style> p{max-width:800px;}</style>
#+HTML_HEAD: <style> li{max-width:800px;}</style

# ################################################################
# 画像を処理するためのコマンド のメモ（orgとは無関係）
# ################################################################
# convert  ./gmail_seaching_operators_cheetsheet.png -thumbnail 300x ./thumbnails/gmail_seaching_operators_cheetsheet.png
#
# convvert -thumbnail
#    - mogrify -path ./thumbnails -thumbnail 300x ./*.{jpg,png}
# gmail_seaching_operators_cheetsheet.png
#
#
#
# convert ./trimmed/gmail_seaching_operators_cheetsheet.png\
#             \( +clone  -background navy  -shadow 80x6+8%+8% \) \
#             +swap \
#             -background none \
#             -flatten \
#             shadowed/gmail_seaching_operators_cheetsheet.png


# ################################################################
# 本文
# ################################################################

* 戦術層: 無理して覚えない

** Gmail で使用できる検索演算子

たくさんあります。

{{{linkImage(gmail_seaching_operators.png)}}}

** 無理して覚えなくていい理由

- まずざっくりと絞り込んで、その後は目で（肉眼で）探せばいいので。
- gmailが演算子を補完してくれるので。
  - 「うろ覚え」で覚えておけばOK
- 定型句を管理するツールを使えばいいので。

*** gmailが演算子を補完してくれる様子
- "la"と打ったら "label:todo-/undone" などを候補に挙げてくれている様子
  - {{{linkImage(completion_1.png)}}}
- "has"と打ったら "has:attachment" などを候補に挙げてくれている様子
  - {{{linkImage(completion_2.png)}}}
- "ne"と打ったら "newer_than:2d" を候補に挙げてくれている様子
  - {{{linkImage(completion_3.png)}}}

*** 定型句を管理するツールを使っている様子
- 定型句を管理するツールを使って、日付を動的に計算しつつ、検索演算子をクリップボードに追加する(stack)様子
  - 例1: inbox内にある、35日以上前（※1） かつ キーワード"株式会社技術評論社" を含むメールを検索したい。
    - 検索演算子 = /in:inbox "株式会社技術評論社" older:2022/09/25/
    - ※1. 執筆時点の10/30(日)を基準とする。
    - {{{linkImage(snippet_selecting.png)}}}
  - 例2: inbox内にある、2日以上前の googleカレンダーの通知メールを検索したい。
    - 検索演算子 = /in:inbox "googleカレンダー" older:2022/10/28/
      - （実は、older_than を使えば、固定文字列でOK。検索演算子 = /in:inbox "googleカレンダー" older_than:2d/）
- クリップボードからgmailの検索フォームに貼り付けて、検索を実行した様子
  - {{{linkImage(snippet_pasted.png)}}}
- ツールを使うべき指標
  - 頻度
  - 文字数
  - （打ち間違えの影響度合い）

* 技術層

** 「厳選」された演算子

|----------------------------------+----------------------------+----------------------------------------------------------------------|
| 絞り込み対象                     | 演算子                     | 例 や 説明                                                           |
|----------------------------------+----------------------------+----------------------------------------------------------------------|
| 送信者                           | from:                      | *from:hayakat@fsi.co.jp*                                             |
| 件名に含まれるキーワード         | subject:                   | *subject:バナナ*                                                     |
| ラベル                           | label:                     | *label:p.99.SkyFall*                                                 |
|----------------------------------+----------------------------+----------------------------------------------------------------------|
| 含まれるもの                     | *has:attachment*           | ファイルが添付されているメール                                       |
|                                  | *has:drive*                | googleドライブへのリングが含まれるメール                             |
|                                  | *has:document*             | googleドキュメントへのリングが含まれるメール                         |
|                                  | *has:spreadsheet*          | googleスプレッドシートへのリングが含まれるメール                     |
|                                  | *has:presentation*         | googleスライドへのリングが含まれるメール                             |
|----------------------------------+----------------------------+----------------------------------------------------------------------|
| 特定の添付ファイル（拡張子）     | filename:                  | *filename:pdf* → pdf が添付されているメール                          |
| 特定の添付ファイル（ファイル名） | filename:                  | *filename:orange.txt* → ファイル "orange.txt" が添付されているメール |
|----------------------------------+----------------------------+----------------------------------------------------------------------|
| 未読なメール                     | *is:unread*                |                                                                      |
|----------------------------------+----------------------------+----------------------------------------------------------------------|
| 期間（絶対値）                   | after: または newer:       | *after:2022/10/30*                                                   |
|                                  | older: または before:      | *before:2022/10/31*                                                  |
| 期間（相対値）                   | newer_than: や older_than: | *older_than:2d* → 今日から2日前よりも古いメール                      |
|                                  |                            | *newer_than:2d* → 今日から2日前よりも新しいメール                    |
|----------------------------------+----------------------------+----------------------------------------------------------------------|

** 論理演算

|--------------+--------------------------------+---------------------------------------------------------------------------------------|
| 絞り込み対象 | 演算子                         | 例                                                                                    |
|--------------+--------------------------------+---------------------------------------------------------------------------------------|
| 論理和       | OR または波カッコ {...} で囲む |                                                                                       |
| 論理積       | 半角スペース（※2）             |                                                                                       |
| 除外         | 演算子の前にハイフンを付ける   | *label:FSI -label:TODO* → ラベル"FSI"は付いているが、ラベル"TODO"は付いていないメール |
|--------------+--------------------------------+---------------------------------------------------------------------------------------|

- 組み合わせが複雑な場合 または 組み合わせを明示したい場合は 丸カッコ (...) で囲む。
- ※2. つまりは、単純に複数の演算子を記述すると、自動的に論理積になる。
  - 経験上、AND を明記してもOK。

** cheatsheet
{{{linkImage(gmail_seaching_operators_cheatsheet.png)}}}
